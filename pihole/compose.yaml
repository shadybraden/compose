services:
  pihole:
    image: pihole/pihole
    container_name: pihole
    environment:
      - FTLCONF_webserver_api_password=${pihole_password}
      - FTLCONF_dns_upstreams=9.9.9.9;1.1.1.1
      - TZ=America/New_York
      - FTLCONF_dns_listeningMode=all
      - USER=${USER}
    volumes:
      - /home/${USER}/pihole/etc-pihole:/etc/pihole
      - /home/${USER}/pihole/etc-dnsmasq.d:/etc/dnsmasq.d
    ports:
      - "53:53/tcp"
      - "53:53/udp"
      - "5353:80/tcp"
    restart: unless-stopped
    cap_add:
      - SYS_NICE
